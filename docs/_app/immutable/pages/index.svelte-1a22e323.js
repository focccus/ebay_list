import{K as pe,S as ge,i as me,s as be,l as p,a as V,u as K,m as g,p as v,c as A,v as O,h as d,q as f,b as j,J as i,L as X,M as ee,N as _e,O as de,n as re,P as he,Q as ve,R as we,o as Ee,w as Y,T as ae}from"../chunks/index-160a83a5.js";const Ie=()=>{const s=pe("__svelte__");return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:s.navigating.subscribe}},session:s.session,updated:s.updated}},ke={subscribe(s){return Ie().page.subscribe(s)}};function ie(s,l,e){const r=s.slice();return r[14]=l[e],r}function ne(s,l,e){const r=s.slice();return r[17]=l[e],r}function oe(s){let l,e,r;return{c(){l=p("div"),e=p("span"),r=K(`
				fetching...`),this.h()},l(o){l=g(o,"DIV",{class:!0});var c=v(l);e=g(c,"SPAN",{class:!0}),v(e).forEach(d),r=O(c,`
				fetching...`),c.forEach(d),this.h()},h(){f(e,"class","h-6 w-6 block rounded-full border-4 border-t-blue-300 animate-spin"),f(l,"class","flex items-center gap-2 text-gray-500")},m(o,c){j(o,l,c),i(l,e),i(l,r)},d(o){o&&d(l)}}}function ue(s){let l,e;return{c(){l=p("p"),e=K(s[2])},l(r){l=g(r,"P",{});var o=v(l);e=O(o,s[2]),o.forEach(d)},m(r,o){j(r,l,o),i(l,e)},p(r,o){o&4&&Y(e,r[2])},d(r){r&&d(l)}}}function ce(s){let l,e=s[17]+"",r;return{c(){l=p("span"),r=K(e),this.h()},l(o){l=g(o,"SPAN",{class:!0});var c=v(l);r=O(c,e),c.forEach(d),this.h()},h(){f(l,"class","text-right")},m(o,c){j(o,l,c),i(l,r)},p(o,c){c&32&&e!==(e=o[17]+"")&&Y(r,e)},d(o){o&&d(l)}}}function fe(s){let l,e,r,o,c,z,y,m,S,k=s[14].title+"",T,M,w,q,D=s[14].price+"",x,U,h,N,P,I=s[14].location+"",B,F,R,L=s[14].time+"",G,W,E,b=s[14].tags,_=[];for(let n=0;n<b.length;n+=1)_[n]=ce(ne(s,b,n));return{c(){l=p("a"),e=p("div"),r=p("div"),o=p("img"),z=V(),y=p("div"),m=p("div"),S=p("h2"),T=K(k),M=V(),w=p("p"),q=p("span"),x=K(D),U=V();for(let n=0;n<_.length;n+=1)_[n].c();h=V(),N=p("div"),P=p("p"),B=K(I),F=V(),R=p("p"),G=K(L),W=V(),this.h()},l(n){l=g(n,"A",{href:!0,target:!0});var t=v(l);e=g(t,"DIV",{class:!0});var a=v(e);r=g(a,"DIV",{class:!0});var u=v(r);o=g(u,"IMG",{src:!0,alt:!0}),u.forEach(d),z=A(a),y=g(a,"DIV",{class:!0});var C=v(y);m=g(C,"DIV",{});var J=v(m);S=g(J,"H2",{class:!0});var Z=v(S);T=O(Z,k),Z.forEach(d),M=A(J),w=g(J,"P",{});var Q=v(w);q=g(Q,"SPAN",{class:!0});var $=v(q);x=O($,D),$.forEach(d),U=A(Q);for(let te=0;te<_.length;te+=1)_[te].l(Q);Q.forEach(d),J.forEach(d),h=A(C),N=g(C,"DIV",{});var H=v(N);P=g(H,"P",{});var le=v(P);B=O(le,I),le.forEach(d),F=A(H),R=g(H,"P",{});var se=v(R);G=O(se,L),se.forEach(d),H.forEach(d),C.forEach(d),a.forEach(d),W=A(t),t.forEach(d),this.h()},h(){ae(o.src,c=s[14].img)||f(o,"src",c),f(o,"alt",""),f(r,"class","aspect-square rounded flex items-center justify-center bg-slate-100"),f(S,"class","text-xl font-bold"),f(q,"class","text-xl"),f(y,"class","m-3 flex flex-col place-content-around"),f(e,"class","grid grid-cols-[1fr_2fr] m-3 rounded hover:bg-slate-50"),f(l,"href",E="https://www.ebay-kleinanzeigen.de"+s[14].url),f(l,"target","__blank")},m(n,t){j(n,l,t),i(l,e),i(e,r),i(r,o),i(e,z),i(e,y),i(y,m),i(m,S),i(S,T),i(m,M),i(m,w),i(w,q),i(q,x),i(w,U);for(let a=0;a<_.length;a+=1)_[a].m(w,null);i(y,h),i(y,N),i(N,P),i(P,B),i(N,F),i(N,R),i(R,G),i(l,W)},p(n,t){if(t&32&&!ae(o.src,c=n[14].img)&&f(o,"src",c),t&32&&k!==(k=n[14].title+"")&&Y(T,k),t&32&&D!==(D=n[14].price+"")&&Y(x,D),t&32){b=n[14].tags;let a;for(a=0;a<b.length;a+=1){const u=ne(n,b,a);_[a]?_[a].p(u,t):(_[a]=ce(u),_[a].c(),_[a].m(w,null))}for(;a<_.length;a+=1)_[a].d(1);_.length=b.length}t&32&&I!==(I=n[14].location+"")&&Y(B,I),t&32&&L!==(L=n[14].time+"")&&Y(G,L),t&32&&E!==(E="https://www.ebay-kleinanzeigen.de"+n[14].url)&&f(l,"href",E)},d(n){n&&d(l),he(_,n)}}}function Pe(s){let l,e,r,o,c,z,y,m,S,k,T,M,w,q,D,x,U,h,N,P,I,B,F,R,L,G,W,E=s[6]&&oe(),b=s[2]&&ue(s),_=s[5],n=[];for(let t=0;t<_.length;t+=1)n[t]=fe(ie(s,_,t));return{c(){l=p("div"),e=p("form"),r=p("input"),o=V(),c=p("span"),z=K("Interval:"),y=V(),m=p("input"),S=V(),k=p("span"),T=K("s"),M=V(),w=p("input"),q=V(),D=p("input"),U=V(),h=p("div"),E&&E.c(),N=V(),b&&b.c(),P=V(),I=p("a"),B=K("Lesezeichen"),R=V(),L=p("div");for(let t=0;t<n.length;t+=1)n[t].c();this.h()},l(t){l=g(t,"DIV",{class:!0});var a=v(l);e=g(a,"FORM",{class:!0});var u=v(e);r=g(u,"INPUT",{class:!0,placeholder:!0}),o=A(u),c=g(u,"SPAN",{class:!0});var C=v(c);z=O(C,"Interval:"),C.forEach(d),y=A(u),m=g(u,"INPUT",{class:!0,type:!0,placeholder:!0}),S=A(u),k=g(u,"SPAN",{});var J=v(k);T=O(J,"s"),J.forEach(d),M=A(u),w=g(u,"INPUT",{class:!0,placeholder:!0}),q=A(u),D=g(u,"INPUT",{type:!0,class:!0}),u.forEach(d),U=A(a),h=g(a,"DIV",{class:!0});var Z=v(h);E&&E.l(Z),Z.forEach(d),N=A(a),b&&b.l(a),a.forEach(d),P=A(t),I=g(t,"A",{href:!0,class:!0});var Q=v(I);B=O(Q,"Lesezeichen"),Q.forEach(d),R=A(t),L=g(t,"DIV",{class:!0});var $=v(L);for(let H=0;H<n.length;H+=1)n[H].l($);$.forEach(d),this.h()},h(){f(r,"class","form-control px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none "),f(r,"placeholder","Kleinanzeigen Such URL"),f(c,"class","ml-2"),f(m,"class","form-control px-3 ml-1 w-16 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),f(m,"type","number"),f(m,"placeholder","Time between queries in s"),f(w,"class","form-control px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 ml-3 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none "),f(w,"placeholder","Blacklist (Leerzeichen trennen)"),f(D,"type","submit"),D.value=x=s[3]?"Pause":"Start",f(D,"class","inline-block ml-3 px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"),f(e,"class","m-5"),f(h,"class","h-6"),f(l,"class","flex align-middle items-center flex-col"),f(I,"href",F=`/ebay_list?url=${s[0]}&interval=${s[4]}&block=${s[1]}`),f(I,"class","fixed right-2 bottom-2 bg-blue-600 p-3 font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg"),f(L,"class","grid grid-cols-3 p-2")},m(t,a){j(t,l,a),i(l,e),i(e,r),X(r,s[0]),i(e,o),i(e,c),i(c,z),i(e,y),i(e,m),X(m,s[4]),i(e,S),i(e,k),i(k,T),i(e,M),i(e,w),X(w,s[1]),i(e,q),i(e,D),i(l,U),i(l,h),E&&E.m(h,null),i(l,N),b&&b.m(l,null),j(t,P,a),j(t,I,a),i(I,B),j(t,R,a),j(t,L,a);for(let u=0;u<n.length;u+=1)n[u].m(L,null);G||(W=[ee(r,"input",s[8]),ee(m,"input",s[9]),ee(w,"input",s[10]),ee(e,"submit",_e(s[7]))],G=!0)},p(t,[a]){if(a&1&&r.value!==t[0]&&X(r,t[0]),a&16&&de(m.value)!==t[4]&&X(m,t[4]),a&2&&w.value!==t[1]&&X(w,t[1]),a&8&&x!==(x=t[3]?"Pause":"Start")&&(D.value=x),t[6]?E||(E=oe(),E.c(),E.m(h,null)):E&&(E.d(1),E=null),t[2]?b?b.p(t,a):(b=ue(t),b.c(),b.m(l,null)):b&&(b.d(1),b=null),a&19&&F!==(F=`/ebay_list?url=${t[0]}&interval=${t[4]}&block=${t[1]}`)&&f(I,"href",F),a&32){_=t[5];let u;for(u=0;u<_.length;u+=1){const C=ie(t,_,u);n[u]?n[u].p(C,a):(n[u]=fe(C),n[u].c(),n[u].m(L,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=_.length}},i:re,o:re,d(t){t&&d(l),E&&E.d(),b&&b.d(),t&&d(P),t&&d(I),t&&d(R),t&&d(L),he(n,t),G=!1,ve(W)}}}function ye(s,l,e){let r;we(s,ke,U=>e(12,r=U));let o="",c,z,y="",m,S,k=[],T=!1;Ee(()=>{var U,h,N;e(0,c=(U=r.url.searchParams.get("url"))!=null?U:""),e(1,z=(h=r.url.searchParams.get("block"))!=null?h:""),e(4,S=parseInt((N=r.url.searchParams.get("interval"))!=null?N:"15")),c&&M()});function M(){if(m){clearInterval(m),e(3,m=void 0);return}c.match(/https:\/\/www\.ebay-kleinanzeigen\.de\/.*/)?(o=c,e(5,k=[]),m&&clearInterval(m),e(3,m=setInterval(w,S*1e3)),w()):e(2,y="Not a valid ebay url!")}async function w(){e(6,T=!0),e(2,y="");let U=z.trim().length?z.split(/\s/):[];const h=window.$;h.get("https://api.allorigins.win/raw?url="+o,N=>{h(N).find(".aditem").each(function(){if(h(this).find(".icon-feature-topad").length)return;let P={url:h(this).attr("data-href"),price:h(this).find(".aditem-main--middle--price").text().trim(),title:h(this).find(".ellipsis").text(),img:h(this).find(".imagebox").attr("data-imgsrc"),location:h(this).find(".aditem-main--top--left").text().replace(/(\n|\s)+/g," ").trim(),time:h(this).find(".aditem-main--top--right").text().replace(/(\n|\s)+/g," ").trim(),desc:h(this).find(".aditem-main--middle--description").text(),tags:new Array};h(this).find(".simpletag").each(function(){P.tags.push(h(this).text())}),!k.some(I=>I.url==P.url)&&!U.some(I=>(P.title+P.desc+P.location).toLowerCase().includes(I))&&e(5,k=[P,...k])}),e(6,T=!1)})}function q(){c=this.value,e(0,c)}function D(){S=de(this.value),e(4,S)}function x(){z=this.value,e(1,z)}return[c,z,y,m,S,k,T,M,q,D,x]}class Ne extends ge{constructor(l){super(),me(this,l,ye,Pe,be,{})}}export{Ne as default};
