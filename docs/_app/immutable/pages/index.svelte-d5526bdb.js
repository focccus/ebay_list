import{K as we,L as Ie,S as ke,i as Ee,s as ye,l as m,a as V,u as j,m as _,p as I,c as A,v as F,h as d,q as f,b as G,J as i,M as Z,N as le,O as Pe,P as be,f as re,d as Se,t as oe,Q as ve,R as Ne,T as Ve,o as Ae,w as $,U as ue,V as xe,W as ce,g as De}from"../chunks/index-cb58917b.js";const Ue=()=>{const r=we("__svelte__");return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:r.navigating.subscribe}},session:r.session,updated:r.updated}},ze={subscribe(r){return Ue().page.subscribe(r)}};function fe(r,{delay:l=0,duration:e=400,easing:a=Ie}={}){const o=+getComputedStyle(r).opacity;return{delay:l,duration:e,easing:a,css:c=>`opacity: ${c*o}`}}function de(r,l,e){const a=r.slice();return a[14]=l[e],a}function he(r,l,e){const a=r.slice();return a[17]=l[e],a}function pe(r){let l,e,a;return{c(){l=m("div"),e=m("span"),a=j(`
				fetching...`),this.h()},l(o){l=_(o,"DIV",{class:!0});var c=I(l);e=_(c,"SPAN",{class:!0}),I(e).forEach(d),a=F(c,`
				fetching...`),c.forEach(d),this.h()},h(){f(e,"class","h-6 w-6 block rounded-full border-4 border-t-blue-300 animate-spin"),f(l,"class","flex items-center gap-2 text-gray-500")},m(o,c){G(o,l,c),i(l,e),i(l,a)},d(o){o&&d(l)}}}function ge(r){let l,e;return{c(){l=m("p"),e=j(r[2])},l(a){l=_(a,"P",{});var o=I(l);e=F(o,r[2]),o.forEach(d)},m(a,o){G(a,l,o),i(l,e)},p(a,o){o&4&&$(e,a[2])},d(a){a&&d(l)}}}function me(r){let l,e=r[17]+"",a;return{c(){l=m("span"),a=j(e),this.h()},l(o){l=_(o,"SPAN",{class:!0});var c=I(l);a=F(c,e),c.forEach(d),this.h()},h(){f(l,"class","text-right")},m(o,c){G(o,l,c),i(l,a)},p(o,c){c&32&&e!==(e=o[17]+"")&&$(a,e)},d(o){o&&d(l)}}}function _e(r){let l,e,a,o,c,x,E,b,y,P=r[14].title+"",L,B,k,T,N=r[14].price+"",R,D,p,S,q,w=r[14].location+"",M,H,K,U=r[14].time+"",C,Q,W,v,g,z=r[14].tags,n=[];for(let h=0;h<z.length;h+=1)n[h]=me(he(r,z,h));return{c(){l=m("a"),e=m("div"),a=m("div"),o=m("img"),x=V(),E=m("div"),b=m("div"),y=m("h2"),L=j(P),B=V(),k=m("p"),T=m("span"),R=j(N),D=V();for(let h=0;h<n.length;h+=1)n[h].c();p=V(),S=m("div"),q=m("p"),M=j(w),H=V(),K=m("p"),C=j(U),Q=V(),this.h()},l(h){l=_(h,"A",{href:!0,target:!0});var t=I(l);e=_(t,"DIV",{class:!0});var s=I(e);a=_(s,"DIV",{class:!0});var u=I(a);o=_(u,"IMG",{src:!0,class:!0,alt:!0}),u.forEach(d),x=A(s),E=_(s,"DIV",{class:!0});var O=I(E);b=_(O,"DIV",{});var X=I(b);y=_(X,"H2",{class:!0});var ee=I(y);L=F(ee,P),ee.forEach(d),B=A(X),k=_(X,"P",{});var Y=I(k);T=_(Y,"SPAN",{class:!0});var te=I(T);R=F(te,N),te.forEach(d),D=A(Y);for(let se=0;se<n.length;se+=1)n[se].l(Y);Y.forEach(d),X.forEach(d),p=A(O),S=_(O,"DIV",{});var J=I(S);q=_(J,"P",{});var ie=I(q);M=F(ie,w),ie.forEach(d),H=A(J),K=_(J,"P",{});var ne=I(K);C=F(ne,U),ne.forEach(d),J.forEach(d),O.forEach(d),s.forEach(d),Q=A(t),t.forEach(d),this.h()},h(){ue(o.src,c=r[14].img)||f(o,"src",c),f(o,"class","max-h-full max-w-full"),f(o,"alt",""),f(a,"class","aspect-square rounded flex items-center justify-center bg-slate-100"),f(y,"class","text-xl font-bold"),f(T,"class","text-xl"),f(E,"class","m-3 flex flex-col place-content-around"),f(e,"class","grid grid-cols-[1fr_2fr] m-3 rounded hover:bg-slate-50"),f(l,"href",W="https://www.ebay-kleinanzeigen.de"+r[14].url),f(l,"target","__blank")},m(h,t){G(h,l,t),i(l,e),i(e,a),i(a,o),i(e,x),i(e,E),i(E,b),i(b,y),i(y,L),i(b,B),i(b,k),i(k,T),i(T,R),i(k,D);for(let s=0;s<n.length;s+=1)n[s].m(k,null);i(E,p),i(E,S),i(S,q),i(q,M),i(S,H),i(S,K),i(K,C),i(l,Q),g=!0},p(h,t){if((!g||t&32&&!ue(o.src,c=h[14].img))&&f(o,"src",c),(!g||t&32)&&P!==(P=h[14].title+"")&&$(L,P),(!g||t&32)&&N!==(N=h[14].price+"")&&$(R,N),t&32){z=h[14].tags;let s;for(s=0;s<z.length;s+=1){const u=he(h,z,s);n[s]?n[s].p(u,t):(n[s]=me(u),n[s].c(),n[s].m(k,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=z.length}(!g||t&32)&&w!==(w=h[14].location+"")&&$(M,w),(!g||t&32)&&U!==(U=h[14].time+"")&&$(C,U),(!g||t&32&&W!==(W="https://www.ebay-kleinanzeigen.de"+h[14].url))&&f(l,"href",W)},i(h){g||(xe(()=>{v||(v=ce(l,fe,{},!0)),v.run(1)}),g=!0)},o(h){v||(v=ce(l,fe,{},!1)),v.run(0),g=!1},d(h){h&&d(l),ve(n,h),h&&v&&v.end()}}}function Le(r){let l,e,a,o,c,x,E,b,y,P,L,B,k,T,N,R,D,p,S,q,w,M,H,K,U,C,Q,W,v=r[6]&&pe(),g=r[2]&&ge(r),z=r[5],n=[];for(let t=0;t<z.length;t+=1)n[t]=_e(de(r,z,t));const h=t=>oe(n[t],1,1,()=>{n[t]=null});return{c(){l=m("div"),e=m("form"),a=m("input"),o=V(),c=m("span"),x=j("Interval:"),E=V(),b=m("input"),y=V(),P=m("span"),L=j("s"),B=V(),k=m("input"),T=V(),N=m("input"),D=V(),p=m("div"),v&&v.c(),S=V(),g&&g.c(),q=V(),w=m("a"),M=j("Lesezeichen"),K=V(),U=m("div");for(let t=0;t<n.length;t+=1)n[t].c();this.h()},l(t){l=_(t,"DIV",{class:!0});var s=I(l);e=_(s,"FORM",{class:!0});var u=I(e);a=_(u,"INPUT",{class:!0,placeholder:!0}),o=A(u),c=_(u,"SPAN",{class:!0});var O=I(c);x=F(O,"Interval:"),O.forEach(d),E=A(u),b=_(u,"INPUT",{class:!0,type:!0,placeholder:!0}),y=A(u),P=_(u,"SPAN",{});var X=I(P);L=F(X,"s"),X.forEach(d),B=A(u),k=_(u,"INPUT",{class:!0,placeholder:!0}),T=A(u),N=_(u,"INPUT",{type:!0,class:!0}),u.forEach(d),D=A(s),p=_(s,"DIV",{class:!0});var ee=I(p);v&&v.l(ee),ee.forEach(d),S=A(s),g&&g.l(s),s.forEach(d),q=A(t),w=_(t,"A",{href:!0,class:!0});var Y=I(w);M=F(Y,"Lesezeichen"),Y.forEach(d),K=A(t),U=_(t,"DIV",{class:!0});var te=I(U);for(let J=0;J<n.length;J+=1)n[J].l(te);te.forEach(d),this.h()},h(){f(a,"class","form-control px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none "),f(a,"placeholder","Kleinanzeigen Such URL"),f(c,"class","ml-2"),f(b,"class","form-control px-3 ml-1 w-16 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),f(b,"type","number"),f(b,"placeholder","Time between queries in s"),f(k,"class","form-control px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 ml-3 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none "),f(k,"placeholder","Blacklist (Leerzeichen trennen)"),f(N,"type","submit"),N.value=R=r[3]?"Pause":"Start",f(N,"class","inline-block ml-3 px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"),f(e,"class","m-5"),f(p,"class","h-6"),f(l,"class","flex align-middle items-center flex-col"),f(w,"href",H=`/ebay_list?url=${r[0]}&interval=${r[4]}&block=${r[1]}`),f(w,"class","fixed right-2 bottom-2 bg-blue-600 p-3 font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg"),f(U,"class","grid grid-cols-1 p-2 md:grid-cols-2 xl:grid-cols-3")},m(t,s){G(t,l,s),i(l,e),i(e,a),Z(a,r[0]),i(e,o),i(e,c),i(c,x),i(e,E),i(e,b),Z(b,r[4]),i(e,y),i(e,P),i(P,L),i(e,B),i(e,k),Z(k,r[1]),i(e,T),i(e,N),i(l,D),i(l,p),v&&v.m(p,null),i(l,S),g&&g.m(l,null),G(t,q,s),G(t,w,s),i(w,M),G(t,K,s),G(t,U,s);for(let u=0;u<n.length;u+=1)n[u].m(U,null);C=!0,Q||(W=[le(a,"input",r[8]),le(b,"input",r[9]),le(k,"input",r[10]),le(e,"submit",Pe(r[7]))],Q=!0)},p(t,[s]){if(s&1&&a.value!==t[0]&&Z(a,t[0]),s&16&&be(b.value)!==t[4]&&Z(b,t[4]),s&2&&k.value!==t[1]&&Z(k,t[1]),(!C||s&8&&R!==(R=t[3]?"Pause":"Start"))&&(N.value=R),t[6]?v||(v=pe(),v.c(),v.m(p,null)):v&&(v.d(1),v=null),t[2]?g?g.p(t,s):(g=ge(t),g.c(),g.m(l,null)):g&&(g.d(1),g=null),(!C||s&19&&H!==(H=`/ebay_list?url=${t[0]}&interval=${t[4]}&block=${t[1]}`))&&f(w,"href",H),s&32){z=t[5];let u;for(u=0;u<z.length;u+=1){const O=de(t,z,u);n[u]?(n[u].p(O,s),re(n[u],1)):(n[u]=_e(O),n[u].c(),re(n[u],1),n[u].m(U,null))}for(De(),u=z.length;u<n.length;u+=1)h(u);Se()}},i(t){if(!C){for(let s=0;s<z.length;s+=1)re(n[s]);C=!0}},o(t){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)oe(n[s]);C=!1},d(t){t&&d(l),v&&v.d(),g&&g.d(),t&&d(q),t&&d(w),t&&d(K),t&&d(U),ve(n,t),Q=!1,Ne(W)}}}const ae=5;function Te(r,l,e){let a;Ve(r,ze,D=>e(12,a=D));let o="",c,x,E="",b,y,P=[],L=!1;Ae(()=>{var D,p,S;e(0,c=(D=a.url.searchParams.get("url"))!=null?D:""),e(1,x=(p=a.url.searchParams.get("block"))!=null?p:""),e(4,y=parseInt((S=a.url.searchParams.get("interval"))!=null?S:ae.toString())),c&&B()});function B(){if(b){clearInterval(b),e(3,b=void 0);return}if(y<ae)return e(2,E=`Interval muss mindestens ${ae}s betragen`);c.match(/https:\/\/www\.ebay-kleinanzeigen\.de\/.*/)?(o=c,e(5,P=[]),b&&clearInterval(b),e(3,b=setInterval(k,y*1e3)),k()):e(2,E="Not a valid ebay url!")}async function k(){e(6,L=!0),e(2,E="");let D=x.trim().length?x.split(/\s/):[];const p=window.$;let S=[];p.get("https://corsproxy.io/?"+o,q=>{p(q).find(".aditem").each(function(){if(p(this).find(".icon-feature-topad").length)return;let w={url:p(this).attr("data-href"),price:p(this).find(".aditem-main--middle--price").text().trim(),title:p(this).find(".ellipsis").text(),img:p(this).find(".imagebox").attr("data-imgsrc"),location:p(this).find(".aditem-main--top--left").text().replace(/(\n|\s)+/g," ").trim(),time:p(this).find(".aditem-main--top--right").text().replace(/(\n|\s)+/g," ").trim(),desc:p(this).find(".aditem-main--middle--description").text(),tags:new Array};p(this).find(".simpletag").each(function(){w.tags.push(p(this).text())}),!P.some(M=>M.url==w.url)&&!D.some(M=>(w.title+w.desc+w.location).toLowerCase().includes(M))&&S.push(w)}),e(5,P=[...S,...P]),e(6,L=!1)})}function T(){c=this.value,e(0,c)}function N(){y=be(this.value),e(4,y)}function R(){x=this.value,e(1,x)}return[c,x,E,b,y,P,L,B,T,N,R]}class Me extends ke{constructor(l){super(),Ee(this,l,Te,Le,ye,{})}}export{Me as default};
